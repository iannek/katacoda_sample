# 演習概要
- 演習内容
  - シェルスクリプト実行時に引数を渡す。
  - 渡された引数の件数と中身が妥当であるかをチェックし、処理結果を表示する。

- 演習目標
  - シェルスクリプトへの引数の渡し方、使い方を理解する。
  - 引数として用いる特殊変数を理解する。


# 演習内容

## 課題1. 引数の処理を行うシェルスクリプト
以下の処理を行うシェルスクリプトのファイル(test.sh)を作成・実行する。  
  - シェルスクリプト実行時に1つ目の引数として5,2つ目の引数として8を渡す。
  - 引数に関して以下の2つの判定を行い、結果に応じて処理を分岐する。
    - 判定1
      - 渡された引数の数が2個であるかを判定する。
        - 2個である場合…2つ目の判定処理に移る。
        - 2個でない場合…"引数指定不備"とターミナル上に出力して、処理を終了する。
    - 判定2
      - 引数の値が5,8であるかを判定する。
        - 5,8である場合…引数を足し合わせて結果をターミナル上に出力する。
        - 5,8でない場合…"引数指定不備"とターミナル上に出力して、処理を終了する。

## 発展問題
課題1の判定2を以下の通り変更した場合のシェルスクリプトを作成する
- 渡された引数が数字であるかどうかを判定する。
    - 数字である場合…引数を足し合わせて結果をターミナル上に出力する。
    - 数字でない場合…"引数指定不備"とターミナル上に出力して、処理を終了する。

# ヒント
## 課題1
<details><summary>講義資料参考ページ</summary><div>

- 特殊変数
  - p39
</div></details>

<details><summary>引数の参照方法</summary><div>

特殊変数を使用することでシェルスクリプト内で参照できる  
例えば、コマンド`bash test.sh 5 8`という形式で実行されたシェルスクリプトの場合、
特殊変数`$#`、`$1`、`$2`をechoなどで出力してみると、それぞれ`2`、`5`、`8`という値となっていることがわかる。(各特殊変数の意味は講義資料p39参照)


</div></details>

## 発展問題
<details><summary>解くための指針</summary><div>

- 直接数字であるかどうかの判定はできないため、コマンド`expr`で計算を行いその終了ステータスで判定する。

</div></details>

# 演習解答  

<details><summary>解答例</summary><div>

## 課題1. 引数の処理を行うシェルスクリプト  解答例  
シェルスクリプトファイル"test.sh"をエディタから作成し、下記の内容を書き込む。  

``` sh
#!/bin/bash
if [ $# = 2 ] && [ $1 = 5 ] && [ $2 = 8 ]; then
  echo $(($1 + $2))
else
  echo "引数指定不備"
fi
```
<details><summary>課題1のシェルスクリプトの内容解説</summary><div>

- `$#`　…　引数の個数を参照する特殊変数。講義資料p39を参照。
- `$数字`　…　数字番目の引数の値を参照する特殊変数。講義資料p39を参照。
- `&&` …　複数条件の
</div></details>

test.shを実行する。  

```
$ bash test.sh 5 8
```

計算結果が表示されることを確認。  
(以下は上記の例の場合の表示)

```
13
```

引数の数が誤っている場合や渡された値が誤っている場合は"引数指定不備"と表示されることを確認する。

コマンド例  
```
$ bash test.sh 5
```

```
$ bash test.sh 5 7
```


出力結果を確認  

```
引数指定不備
```


## 引数の処理を行うシェルスクリプト(発展問題解答例)  

``` sh
#!/bin/bash
expr $1 + $2 > /dev/null 2>&1 # 計算処理を行いエラー結果は出力しない
RET=$? # exprの終了ステータスを代入する。計算結果が0以外の場合0が、計算結果が0の場合は1が代入される。

if [ $# = 2 ] && [ $RET = 0 ] || [ $RET = 1 ]; then
  echo $(($1 + $2))
else
  echo "引数指定不備"
fi
```

</div></details>

## [前の課題(演習6)](./演習6.md)
## [次の課題(演習8)](./演習8.md)